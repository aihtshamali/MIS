!function(a){a.fn.grating=function(b){function e(){c.options=a.extend(!0,{},a.fn.grating.defaultOptions,b),c.$elems.each(function(b,d){var e=this;e.$this=a(this),e.$this.data("data-clickCount",0);var f=q(e.$this),i=o(e.$this),n=k(e.$this),t=j(e.$this);if(e.$this.children(c.options.elementType).length!=f){var u=a(document.createDocumentFragment()),v="gRating_validation_input_for_"+h(e.$this,b),w=a("<input type='hidden' id='"+v+"' name='"+v+"' data-error=\""+t+'">');if(n){w.attr("data-validate","true"),w.addClass(c.options.formValidationClass),w.attr("required","required"),w.attr("data-minlength","1");var x=a("<div class='help-block with-errors'></div>");u.append(x)}u.append(w);for(var y=1;y<f+1;y++){var z="function"==typeof i?p(i(y-1)):i,A=a("<"+c.options.elementType+">"+z+"</"+c.options.elementType+">");A.data("data-count",y),u.append(A)}e.$this.append(u);var B=e.$this.children(c.options.elementType);B.css(c.options.ratingCss),B.hover(function(b){r(e.$this)&&("mouseenter"===b.type?a(this).css(c.options.ratingHoverCss):a(this).css(c.options.ratingCss))}),B.mouseenter(function(){r(e.$this)&&s(e.$this,a(this).data("data-count"))}),B.click(function(){if(r(e.$this)){if(e.$this.data("data-clickCount",parseInt(e.$this.data("data-clickCount"))+1),m(e.$this))return e.$this.attr("disabled","disabled"),void e.$this.children(c.options.elementType).css("cursor","default");var b=a(this).data("data-count"),d=g(e.$this);d&&e.$this.attr("value")==b&&(b=0),e.$this.attr("value",b),0==b?w.removeAttr("value"):w.attr("value",b),s(e.$this,b),"function"==typeof c.options.callback&&c.options.callback(e.$this,b)}}),e.$this.mouseleave(function(){r(e.$this)&&s(e.$this,e.$this.attr("value"))});var d=l(e.$this,f);e.$this.attr("value",d),d>0&&w.attr("value",d),s(e.$this,d),0==r(e.$this)&&e.$this.children(c.options.elementType).css("cursor","default")}})}function f(a){return 0==i(a)&&(1==a||1==a||"true"==a||"1"==a||"t"==a)}function g(a){return"undefined"!=typeof a.attr("data-deselectable")?f(a.attr("data-deselectable")):c.options.allowDeselect}function h(a,b){var c="",d=a.attr("id");if(0==i(d))c=d;else{var e=a.attr("name");0==i(e)?c=e:d=b}return c}function i(a){return"undefined"==typeof a||""==a||null==a}function j(a){return"undefined"!=typeof a.attr("data-error")?a.attr("data-error"):c.options.validationText}function k(a){return"undefined"!=typeof a.attr("required")?a.attr("required"):c.options.required}function l(a,b){var d=a.attr("value");return i(d)&&(d=c.options.defaultValue),d>b&&(d=0),d}function m(a){var b=n(a);return 0!=b&&parseInt(a.data("data-clickCount"))>=b}function n(a){return"undefined"!=typeof a.attr("data-clicklimit")?a.attr("data-clicklimit"):c.options.clicklimit}function o(a){var b="undefined"!=typeof a.attr("data-character")?a.attr("data-character"):c.options.character;return b=p(b)}function p(a){return"function"==typeof a==0&&a.length>2&&"fa-"==a.substr(0,3)&&(a="<i class='fa "+a+"' aria-hidden='true'></i>"),a}function q(a){return parseInt("undefined"!=typeof a.attr("data-max")?a.attr("data-max"):c.options.elementCount)}function r(a){return"undefined"!=typeof a.attr("disabled")?0==a.attr("disabled"):c.options.enabled}function s(b,d){b.children(c.options.elementType).each(function(){i(d)||a(this).data("data-count")>d?a(this).css(c.options.ratingCss):a(this).css(c.options.ratingHoverCss)})}a.fn.grating.defaultOptions={enabled:!0,allowDeselect:!0,character:"&#9733;",elementType:"span",elementCount:5,clicklimit:0,defaultValue:0,required:!1,validationClass:"form-control",validationText:"Rating is required",callback:null,ratingCss:{fontSize:"30px",color:"#fff",opacity:".5",cursor:"pointer",padding:"0 10px",transition:"all 150ms",display:"inline-block",transform:"rotateX(45deg)",transformOrigin:"center bottom",textShadow:"none"},ratingHoverCss:{color:"#ff0",opacity:"1",transform:"rotateX(0deg)",textShadow:"0 0 30px #ffc"}};var c={};c.$elems=this,c.$elems.data("gRating",c);var d={enable:function(b){return c.options.enabled=b,c.$elems.each(function(){var d=this;d.$this=a(this),d.$this.children(c.options.elementType).css("cursor","default"),b&&d.$this.attr("data-clickCount",0)}),c.$elems},val:function(b){var d={};return c.$elems.each(function(b,c){var e=this;e.$this=a(this);var f=h(e.$this,b);d[f]=e.$this.attr("value")}),1==Object.keys(d).length&&(d=d[Object.keys(d)[0]]),0==i(b)&&void 0!==d[b]&&(d=d[b]),d}};return e(),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var g,h,f=[];for(g in e)a.call(e,g)&&f.push(g);if(b)for(h=0;h<d;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),d}}(jQuery);